<script src="https://unpkg.com/prettier@2.3.2/standalone.js"></script>
<script src="https://unpkg.com/prettier@2.3.2/parser-html.js"></script>
<script src="https://unpkg.com/prettier@2.3.2/parser-babylon.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" />
<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
<script src="_addons/805891399/web/jquery-3.5.1.min.js"></script> <!-- load local -->
<script src="_addons/805891399/web/listReorder.js"></script> <!-- Load the external reordering script -->
<script src="_addons/805891399/web/shortcuts.js"></script>
<script src="_addons/805891399/web/clozes.js"></script>
<script src="_addons/805891399/web/formatter.js"></script>
<script src="_addons/805891399/web/sourceCode.js"></script>
<script>
        var myfontsize = "%(FONTSIZE)s";

        tinymce.init({
    skin: "%(SKIN)s",
    theme: "%(THEME)s",
    selector: '.tinymce6_wysiwyg',
    auto_focus: 'tinymce6_wysiwyg_unique',
    document_base_url: '../../../../../../',
    body_class: 'bodyclass',
    content_css: [%(CONTENTCSS)s],
    formats: {
        bold: { inline: 'b' },
        italic: { inline: 'i' },
        underline: { inline: 'u' }
    },
    force_br_newlines: false,
    convert_newlines_to_brs: false,
    forced_root_block: 'div',
    extended_valid_elements: 'u,b,i',
    autoresize: false,
    invalid_styles: {
        '*': 'width',
        '*': 'text-align'
    },

    plugins: [
        "advlist", "anchor", "accordion", "autolink", "charmap", "code", "codesample", "directionality",
                "emoticons", "fullscreen", "help", "insertdatetime", "link", "lists", "media",
                "nonbreaking", "searchreplace", "table", "visualblocks", "visualchars", "wordcount"
            ],

            text_patterns: [
               // Formats
               { start: '*', end: '*', format: 'italic' },
                { start: '**', end: '**', format: 'bold' },
                { start: '~', end: '~', format: 'strikethrough' },
                { start: '`', end: '`', format: 'code' },
                { start: '```', end: '```', format: 'pre' },
                { start: '==', end: '==', format: 'mark' },
                { start: '_', end: '_', format: 'subscript' },
                { start: '^', end: '^', format: 'superscript' },
                { start: '#', format: 'h1' },
                { start: '##', format: 'h2' },
                { start: '###', format: 'h3' },
                { start: '####', format: 'h4' },
                { start: '#####', format: 'h5' },
                { start: '######', format: 'h6' },
                { start: '* ', cmd: 'InsertUnorderedList' },
                { start: '- ', cmd: 'InsertUnorderedList' },
                { start: '1. ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'decimal' } },
                { start: '1) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'decimal' } },
                { start: 'a. ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-alpha' } },
                { start: 'a) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-alpha' } },
                { start: 'i. ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-roman' } },
                { start: 'i) ', cmd: 'InsertOrderedList', value: { 'list-style-type': 'lower-roman' } },
                { start: '---', replacement: '<hr/>' },
                { start: '--', replacement: '—' },
                { start: '(c)', replacement: '©' },
                { start: '(r)', replacement: '®' },
                { start: '(tm)', replacement: '™' },
                { start: '...', replacement: '…' },
                { start: '<<', replacement: '«' },
                { start: '>>', replacement: '»' },
                { start: '->', replacement: '→' },
                { start: '<-', replacement: '←' },
                { start: '==>', replacement: '⇒' },
                { start: '<==', replacement: '⇐' },
                { start: '!=', replacement: '≠' },
                { start: '>=', replacement: '≥' },
                { start: '<=', replacement: '≤' },
                { start: '+-', replacement: '±'},
                { start: '/d!', replacement: '¡' },
                { start: '/d?', replacement: '¿' },
                { start: '/deg', replacement: '°' },
                { start: '/mu', replacement: 'μ' },
                { start: '/ohm', replacement: 'Ω' },
                { start: '/infty', replacement: '∞' },
                { start: '/alpha', replacement: 'α' },
                { start: '/beta', replacement: 'β' },
                { start: '/gamma', replacement: 'γ' },
                { start: '/delta', replacement: 'δ' },
                { start: '/epsilon', replacement: 'ε' },
                { start: '/zeta', replacement: 'ζ' },
                { start: '/eta', replacement: 'η' },
                { start: '/theta', replacement: 'θ' },
                { start: '/iota', replacement: 'ι' },
                { start: '/kappa', replacement: 'κ' },
                { start: '/lambda', replacement: 'λ' },
                { start: '/mu', replacement: 'μ' },
                { start: '/nu', replacement: 'ν' },
                { start: '/xi', replacement: 'ξ' },
                { start: '/omicron', replacement: 'ο' },
                { start: '/pi', replacement: 'π' },
                { start: '/rho', replacement: 'ρ' },
                { start: '/sigma', replacement: 'σ' },
                { start: '/tau', replacement: 'τ' },
                { start: '/upsilon', replacement: 'υ' },
                { start: '/phi', replacement: 'φ' },
                { start: '/chi', replacement: 'χ' },
                { start: '/psi', replacement: 'ψ' },
                { start: '/omega', replacement: 'ω' },
                { start: '/Gamma', replacement: 'Γ' },
                { start: '/Delta', replacement: 'Δ' },
                { start: '/Theta', replacement: 'Θ' },
                { start: '/Lambda', replacement: 'Λ' },
                { start: '/Xi', replacement: 'Ξ' },
                { start: '/Pi', replacement: 'Π' },
                { start: '/Sigma', replacement: 'Σ' },
                { start: '/Upsilon', replacement: 'Υ' },
                { start: '/Phi', replacement: 'Φ' },
                { start: '/Psi', replacement: 'Ψ' },
                { start: '/Omega', replacement: 'Ω' },
                { start: '/int', replacement: '∫' },
                { start: '/sum', replacement: '∑' },
                { start: '/prod', replacement: '∏' },
                { start: '/lim', replacement: 'lim' },
                { start: '/in', replacement: '∈' },
                { start: '/notin', replacement: '∉' },
                { start: '/subset', replacement: '⊂' },
                { start: '/subseteq', replacement: '⊆' },
                { start: '/supset', replacement: '⊃' },
                { start: '/supseteq', replacement: '⊇' },
                { start: '/cup', replacement: '∪' },
                { start: '/cap', replacement: '∩' },
                { start: '/emptyset', replacement: '∅' },
                { start: '/nabla', replacement: '∇' },
                { start: '/partial', replacement: '∂' },
                { start: '/forall', replacement: '∀' },
                { start: '/exists', replacement: '∃' },
                { start: '/neg', replacement: '¬' },
                { start: '/wedge', replacement: '∧' },
                { start: '/vee', replacement: '∨' },
                { start: '/rightarrow', replacement: '→' },
                { start: '/leftarrow', replacement: '←' },
                { start: '/Rightarrow', replacement: '⇒' },
                { start: '/Leftarrow', replacement: '⇐' },
                { start: '/leftrightarrow', replacement: '↔' },
                { start: '/Leftrightarrow', replacement: '⇔' },
                { start: '/vdash', replacement: '⊢' },
                { start: '/models', replacement: '⊨' },
                { start: '/perp', replacement: '⊥' },
                { start: '/angle', replacement: '∠' },
                { start: '/triangle', replacement: '△' },
                { start: '/square', replacement: '□' },
                { start: '/diamond', replacement: '◇'},
                // Medical
                { start: '/ddx', replacement: 'Differentialdiagnoser' },
                { start: '/d!', replacement: '¡' },
                { start: '/d?', replacement: '¿' },
                { start: '/deg', replacement: '°' },
                { start: '/mu', replacement: 'μ' },
                { start: '/ohm', replacement: 'Ω' },
                { start: '/infty', replacement: '∞' },
                { start: '/alpha', replacement: 'α' },
                { start: '/beta', replacement: 'β' },
                { start: '/gamma', replacement: 'γ' },
                { start: '/delta', replacement: 'δ' },
                { start: '/epsilon', replacement: 'ε' },
                { start: '/zeta', replacement: 'ζ' },
                { start: '/eta', replacement: 'η' },
                { start: '/theta', replacement: 'θ' },
                { start: '/iota', replacement: 'ι' },
                { start: '/kappa', replacement: 'κ' },
                { start: '/lambda', replacement: 'λ' },
                { start: '/mu', replacement: 'μ' },
                { start: '/nu', replacement: 'ν' },
                { start: '/xi', replacement: 'ξ' },
                { start: '/omicron', replacement: 'ο' },
                { start: '/pi', replacement: 'π' },
                { start: '/rho', replacement: 'ρ' },
                { start: '/sigma', replacement: 'σ' },
                { start: '/tau', replacement: 'τ' },
                { start: '/upsilon', replacement: 'υ' },
                { start: '/phi', replacement: 'φ' },
                { start: '/chi', replacement: 'χ' },
                { start: '/psi', replacement: 'ψ' },
                { start: '/omega', replacement: 'ω' },
                { start: '/Gamma', replacement: 'Γ' },
                { start: '/Delta', replacement: 'Δ' },
                { start: '/Theta', replacement: 'Θ' },
                { start: '/Lambda', replacement: 'Λ' },
                { start: '/Xi', replacement: 'Ξ' },
                { start: '/Pi', replacement: 'Π' },
                { start: '/Sigma', replacement: 'Σ' },
                { start: '/Upsilon', replacement: 'Υ' },
                { start: '/Phi', replacement: 'Φ' },
                { start: '/Psi', replacement: 'Ψ' },
                { start: '/Omega', replacement: 'Ω' },
                { start: '/int', replacement: '∫' },
                { start: '/sum', replacement: '∑' },
                { start: '/prod', replacement: '∏' },
                { start: '/lim', replacement: 'lim' },
                { start: '/in', replacement: '∈' },
                { start: '/notin', replacement: '∉' },
                { start: '/subset', replacement: '⊂' },
                { start: '/subseteq', replacement: '⊆' },
                { start: '/supset', replacement: '⊃' },
                { start: '/supseteq', replacement: '⊇' },
                { start: '/cup', replacement: '∪' },
                { start: '/cap', replacement: '∩' },
                { start: '/emptyset', replacement: '∅' },
                { start: '/nabla', replacement: '∇' },
                { start: '/partial', replacement: '∂' },
                { start: '/forall', replacement: '∀' },
                { start: '/exists', replacement: '∃' },
                { start: '/neg', replacement: '¬' },
                { start: '/wedge', replacement: '∧' },
                { start: '/vee', replacement: '∨' },
                { start: '/rightarrow', replacement: '→' },
                { start: '/leftarrow', replacement: '←' },
                { start: '/Rightarrow', replacement: '⇒' },
                { start: '/Leftarrow', replacement: '⇐' },
                { start: '/leftrightarrow', replacement: '↔' },
                { start: '/Leftrightarrow', replacement: '⇔' },
                { start: '/vdash', replacement: '⊢' },
                { start: '/models', replacement: '⊨' },
                { start: '/perp', replacement: '⊥' },
                { start: '/angle', replacement: '∠' },
                { start: '/triangle', replacement: '△' },
                { start: '/square', replacement: '□' },
                { start: '/diamond', replacement: '◇'},
                // Medical
                { start: '/ddx', replacement: 'Differential Diagnosis' },
                { start: '/ttx', replacement: 'Treatments'},

  ],

    toolbar1: '%(TOOLBAR1)s | accordion | removeTableStylesButton fullscreen moveItemUp moveItemDown',  // Add the button to the toolbar
    toolbar2: '%(TOOLBAR2)s',
    statusbar: false,
    promotion: false,
    menubar: 'edit view insert format tools table help media image',
    removed_menuitems: 'file print',
    contextmenu: "link inserttable | cell row column deletetable",

    setup: function (editor) {
        editor.on('init', function () {
            this.getDoc().body.style.fontSize = `${myfontsize.toString()}px`;
            this.getDoc().body.style.fontFamily = '%(FONTNAME)s';
            %(CUSTOMBGCOLOR)s
            editor.execCommand('mceFullScreen');
            editor.execCommand('mceVisualBlocks');
        });

        // Load external scripts
        sourceCodeMain(editor);
        cleanInlineStyles(editor);
        clozesMain(editor);
        shortcutsMain(editor);

        editor.on('dblclick', function (e) {
            const selection = editor.selection;
            const rng = selection.getRng();

            // Check if selection includes trailing whitespace
            const selectedText = selection.getContent({ format: 'text' });
            if (/\s$/.test(selectedText)) {
                // Adjust the range to exclude trailing whitespace
                rng.setEnd(rng.endContainer, rng.endOffset - 1);
                selection.setRng(rng);
            }
        });


    }
});
</script>

<div class="tinymce6_wysiwyg" id="tinymce6_wysiwyg_unique">CONTENTCONTENT</div>
